Bootstrap: docker
From: ubuntu:20.04

%labels
    org.opencontainers.image.ref.name ubuntu
    org.opencontainers.image.version 20.04
    base.image ubuntu:focal
    dockerfile.version 1
    software SnpEff & SnpSift
    software.version 5.2a
    snpeff.jarfile.version 5.2
    snpsift.software.version 5.1
    description Genetic variant annotation and
    description.SnpSift Used after SnpEff annotation
    website https://pcingola.github.io/SnpEff
    license https://github.com/pcingola/SnpEff/blob/master/LICENSE.md
    maintainer Tom Iverson
    maintainer.email tiverson@utah.gov

%environment
    export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snpEff:/snpEff/scripts

%post
    # Set non-interactive mode for apt
    export DEBIAN_FRONTEND=noninteractive

    # Install dependencies (adjust as needed)
    apt-get update && apt-get install -y \
        openjdk-11-jre-headless \
        wget \
        unzip \
        && apt-get clean \
        && rm -rf /var/lib/apt/lists/*

    # Set software versions
    export SNPEFF_VER=5.2a
    export SNPEFF_JAR_VER=5.2
    export SNPSIFT_VER=5.1

    # Copy SnpEff and SnpSift binaries
    mkdir -p /snpEff
    cp -r /snpEff/snpeff /snpEff/snpsift /snpEff/snpeff.jar /snpEff/SnpSift.jar /snpEff/
    cp -r /snpEff/scripts /snpEff/scripts

%runscript
    # Default command when running the container
    exec snpEff -h

%workdir /data

